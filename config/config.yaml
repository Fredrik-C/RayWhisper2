# RayWhisper Default Configuration

# Audio Configuration
audio:
  sample_rate: 16000        # Hz
  channels: 1               # Mono
  chunk_duration: 0.1       # seconds

# Whisper Model Configuration
whisper:
  model_size: "Systran/faster-whisper-medium.en"        # Standard sizes: tiny, base, small, medium, large-v2, large-v3, distil-large-v3
                            # Or HuggingFace model ID: Systran/faster-whisper-medium.en, Systran/faster-whisper-large-v3, etc.
  device: "cuda"             # cpu, cuda, auto - Using CPU to avoid cuDNN dependency issues
  compute_type: "float16"      # int8, int8_float16, float16, float32 - int8 for CPU efficiency
  language: en              # null for auto-detect, or "en", "es", etc.

  # Transcription parameters for accuracy optimization
  beam_size: 8              # Beam search size (1-10). Higher = more accurate but slower. Recommended: 5
  best_of: 10               # Number of candidates (1-10). Higher = better quality. Increased for better context matching
  temperature: 0.1          # Sampling temperature (0.0-1.0). 0.1 allows slight variation to match context
  condition_on_previous_text: false  # Use previous text as context. False recommended when using RAG context
  compression_ratio_threshold: 2.4   # Detect repetitions. Lower = more strict. Recommended: 2.4
  log_prob_threshold: -1.0           # Filter low-confidence segments. Higher = more strict. Recommended: -1.0
  no_speech_threshold: 0.6           # Detect silence. Higher = more strict. Recommended: 0.6
  repetition_penalty: 1.3            # Penalize repetitions (1.0-2.0). 1.3 encourages using context words over misheard audio

# Vector Database Configuration
vector_db:
  collection_name: "raywhisper_docs"
  embedding_model: "BAAI/bge-base-en-v1.5"   # 768-dim model; alternative: BAAI/bge-small-en-v1.5 (384-dim, faster)
  persist_directory: "./data/chroma"
  top_k: 60                 # Number of results to retrieve (balanced for performance and coverage)
  chunk_size: 20            # Number of words per chunk (larger for better context)
  chunk_overlap: 10          # Number of overlapping words between chunks
  use_query_instruction: false  # Use instruction prefix for queries (false for keyword-based search)

# Reranker Configuration
reranker:
  model_name: "BAAI/bge-reranker-base"
  top_n: 30    # Number of results after reranking (increased to capture more unique technical terms)

# Keyboard Configuration
# Key hold hotkey to start recording (hold to record, release to transcribe)
# For Windows: use "super+o" for Windows key + comma
keyboard:
  start_stop_hotkey: "super+o"
  cancel_hotkey: "ctrl+shift+esc"
  caps_lock_poll_interval_ms: 20
  
# Output Configuration
output:
  typing_speed: 0.01        # Delay between keystrokes (seconds)
  use_clipboard_fallback: false

